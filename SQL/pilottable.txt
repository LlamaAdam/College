CREATE DATABASE adamcoxassig02;
CREATE TABLE PILOT
(PilotID VARCHAR(7) NOT NULL, FirstName TEXT NOT NULL , Initials TEXT NOT NULL , LastName TEXT NOT NULL , Salary FLOAT NOT NULL, Primary Key(PilotID));
CREATE TABLE AIRPLANE
(AirplaneID VARCHAR(7) NOT NULL, TypeID VARCHAR(7) NOT NULL, Primary Key(AirplaneID));
CREATE TABLE AIRPLANETYPE
(TypeID VARCHAR(7) NOT NULL, Name TEXT NOT NULL, Description TEXT NOT NULL , NoOfSeats INT NOT NULL, Primary Key(TypeID));

CREATE TABLE PASSENGER
(DocumentID VARCHAR(7) NOT NULL, FirstName TEXT NOT NULL, Initials TEXT NOT NULL, LastName TEXT NOT NULL, Primary Key(DocumentID));
CREATE TABLE FLIGHTCONCESSION
(FlightNo VARCHAR(7) NOT NULL, Origin  TEXT NOT NULL, Destination TEXT NOT NULL, DayOfTheWeek BIT(7) NOT NULL, TimeOfDay TIME NOT NULL, Primary Key(FlightNo));

CREATE TABLE LICENSED
(DocumentID VARCHAR(7) NOT NULL, AirplaneTypeID VARCHAR(7) NOT NULL, DateGranted DATE NOT NULL, ExpiryDate DATE NOT NULL, Primary Key(DocumentID));

CREATE TABLE SCHEDULEDFLIGHT 
(FlightNo VARCHAR(7) NOT NULL, FlightDate DATE NOT NULL, PilotID  VARCHAR(7) NOT NULL, AirplaneID VARCHAR(7) NOT NULL, Primary Key(FlightNo));

CREATE TABLE SEATEDPASSENGER
(FlightNo VARCHAR(7) NOT NULL, FlightDate DATE NOT NULL, Seat  VARCHAR(3) NULL, DocumentID VARCHAR(7) NOT NULL);

Alter Table Airplane
    add CONSTRAINT fk_TypeID
    FOREIGN KEY (TypeID) REFERENCES AIRPLANETYPE (TypeID)
    ON DELETE CASCADE ON UPDATE CASCADE;


Alter Table SEATEDPASSENGER
    add CONSTRAINT fk_FlightNo
    FOREIGN KEY (FlightNo) REFERENCES SCHEDULEDFLIGHT (FlightNo)
    ON DELETE CASCADE ON UPDATE CASCADE;

Alter Table SEATEDPASSENGER
    add CONSTRAINT fk_DocumentIDS
    FOREIGN KEY (DocumentID) REFERENCES Passenger (DocumentID)
    ON DELETE CASCADE ON UPDATE CASCADE;



Alter Table SEATEDPASSENGER
    add CONSTRAINT fk_FlightDat
    FOREIGN KEY (FlightDate) REFERENCES SCHEDULEDFLIGHT (FlightDate)
    ON DELETE CASCADE ON UPDATE CASCADE;

Alter Table SCHEDULEDFLIGHT 
	add CONSTRAINT fk_PilotID
	FOREIGN KEY (PilotID) REFERENCES PILOT (PilotID)
	ON DELETE CASCADE ON UPDATE CASCADE;

Alter Table SCHEDULEDFLIGHT 
	add CONSTRAINT fk_FlightDates
	FOREIGN KEY (FlightDate) REFERENCES SEATEDPASSENGER (FlightDate)
	ON DELETE CASCADE ON UPDATE CASCADE;

Alter Table SCHEDULEDFLIGHT 
	add CONSTRAINT fk_AirplaneID
	FOREIGN KEY (AirplaneID) REFERENCES AIRPLANE (AirplaneID)
	ON DELETE CASCADE ON UPDATE CASCADE;

Alter Table LICENSED
	add CONSTRAINT fk_AirplanetypeID
	FOREIGN KEY (AirplanetypeID) REFERENCES AIRPLANETYPE (TypeID)
	ON DELETE CASCADE ON UPDATE CASCADE;

Alter Table SCHEDULEDFLIGHT 
	add CONSTRAINT fk_FlightNo_sc
	FOREIGN KEY (FlightNo) REFERENCES FLIGHTCONCESSION (FlightNo)
	ON DELETE CASCADE ON UPDATE CASCADE;

Alter Table LICENSED
	add CONSTRAINT fk_DocumentID_li
	FOREIGN KEY (DocumentID) REFERENCES  PILOT (PilotID)
	ON DELETE CASCADE ON UPDATE CASCADE;